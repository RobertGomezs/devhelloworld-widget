<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script>

    window.addEventListener("load", function () {

        var btn1Url = "https://jsonplaceholder.typicode.com/users4444";
        var btn2Url = "https://jsonplaceholder.typicode.com/todos";


        const params = new URLSearchParams(window.location.search);
        const prodId = params.get('Telefono');

        // const lbtelefono = document.getElementById('lbtelefono').textContent = "+52 9541135317";
        const inpuTelefono = document.getElementById('inptelefono').value = prodId;
        const btn1 = document.getElementById("btn1");
        const btn2 = document.getElementById("btn2");


        const datos = {
            telefono: inpuTelefono
        };

        btn1.addEventListener("click", function () {
            console.log('btn1');
            console.log(btn1Url);
            setAction(btn1Url);

        });

        btn2.addEventListener("click", function () {
            console.log('btn2');
            console.log(btn2Url);
            setAction(btn2Url);
        });

        function setAction(url) {

            fetch(url, {
                method: 'GET',
                //body : JSON.stringify(datos),
                headers: {
                    'Content-type': 'application/json; charset=UTF-8'
                }
            })
                .then((response) => {

                    if (response.ok) {
                        swal("Encuesta enviada.", "", "success");
                        btn1.disabled = true;
                        btn2.disabled = true;

                    } else {
                        swal("¡Ups! algo salió mal.", "La encuesta no fue enviada.", "error");
                    }
                })
                .catch(function (error) {
                    console.log("Hubo un problema con la petición Fetch:" + error.message);
                })
        }


    });


</script>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">


<div class="neo-widget__content" style="overflow: auto;">
    <div _ngcontent-tjv-c75="" puppeter-id="interaction-details__header" class="neo-widget__header">
        <nav class="neo-navbar">
            <div class="neo-nav--left">
                <a class="neo-navbar__brand" title="Neo Framework">
                    <img src="https://design.avayacloud.com/images/avaya-logo-header.svg">
                    <!-- <p>Hello World Widget</p> -->
                </a>

            </div>
        </nav>
    </div>
    <div class="new-widget__body" style="height: 100%; overflow: unset;">
        <!-- <p style="text-align: justify;"></p> -->

        <div class="container"  style="width: 300px; padding-top: 160px; text-align: center;">

            <center>
                <div class="mb-3">
                    <input type="tel" id="inptelefono" class="form-control" placeholder="(+52) 9541135428" maxlength="15" />
                </div>
                <div class="d-grid gap-2">
                    <input id="btn1" class="btn btn-success btn-sm" type="button" value="Encuesta citas">
                    <input id="btn2" class="btn btn-success btn-sm" type="button" value="Encuesta atencion">
                </div>
            </center>
        
        </div>

    </div>
</div>